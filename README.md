
![event parameter](https://github.com/TiuMui/kittygram_final/actions/workflows/main.yml/badge.svg?event=push)

#### Описание
**Kittygram** - сервис для размещения пользовательской информации. Позволяет зарегистрироваться и добавлять информацию о питомцах. Можно добавлять фото, имя, год рождения, окрас и достижения питомца.
#### Использованные технологии
- **Python**
- **Django**
- **Django REST Framework**
- Контейнеризация с **Docker**, **Docker Compose**, **Docker Hub**
- Автоматизация тестирования кода и деплоя с помощью **GitHub Actions**
- **Gunicorn**
- **Nginx**

##### Как запустить проект на удаленном сервере
Клонировать репозиторий в нужную директорию:
```shell
git clone git@github.com:TiuMui/kittygram_final.git
```
Создать в директории проекта и заполнить файл `.env` собственными cекретами по примеру файла `.env.example`:

```
POSTGRES_USER=<имя_пользователя_БД>
POSTGRES_PASSWORD=<пароль_БД>
POSTGRES_DB=<имя_БД>
DB_HOST=db
DB_PORT=5432
SECRET_KEY=<секретный_ключ_Django>
DEBUG=<False_или_True>
ALLOWED_HOSTS=<перечислить через запятую доменные имена и IP>

```

При осуществлении push в удаленный репозиторий, GitHub Actions осуществляет тестирование, сборку образов контейнеров фронтэнда, бэкенда, Nginx и отправку их в Docker Hub, затем деплой проекта на удаленный сервер и отправку сообщения о результате последнего в Telegram.

Для загрузки образов в Docker Hub необходимо в файле `docker-compose.production.yml` указать в именах образов собственный аккаунт на Docker Hub. А также в настройках собственного удаленного репозитория проекта на GitHub указать следующие **Secrets**:

- DOCKER_PASSWORD, DOCKER_USERNAME - пароль и имя польлзователя от аккаунта Docker Hub
- HOST - IP удаленного собственного сервера
- SSH_KEY, SSH_PASSPHRASE, USER - приватный ключ, пароль от него и имя пользователя для доступа к серверу с помощью SSH
- TELEGRAM_TO, TELEGRAM_TOKEN - ID пользователя-получателя сообщений Telegram и токен Telegram-бота для отправки сообщений.

Перед осуществлением push в удаленный репозиторий на удаленном сервере нужно выполнить следующее:
- Установить и настроить внешний Nginx на отправку всех запросов на http://127.0.0.1:9000 (порт 9000 хоста проброшен на порт 80 контейнера Nginx)
- создать директорию `kittygram` и перенести в нее собственный файл с секретами `.env`.
#### Автор проекта
Тимур Мустафин
